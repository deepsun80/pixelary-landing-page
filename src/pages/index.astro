---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Scene1Hero from '../components/Scene1Hero.astro';
import Scene2Services from '../components/Scene2Services.astro';
import Scene3Contact from '../components/Scene3Contact.astro';
import Footer from '../components/Footer.astro';
---

<BaseLayout>
  <Header />
  <Scene1Hero />
  <Scene2Services />
  <Scene3Contact />
  <Footer />
</BaseLayout>

<script>
  import { gsap } from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  // Pin scene 1
  ScrollTrigger.create({
    trigger: '#scene-1',
    start: 'top top',
    end: '+=500',
    pin: true,
  });

  // Fade out tagline
  gsap.to('#hero-tagline', {
    opacity: 0,
    y: -20,
    ease: 'none',
    scrollTrigger: {
      trigger: '#scene-1',
      start: 'top top',
      end: '+=150',
      scrub: true,
    },
  });

  // Fade out scroll indicator
  gsap.to('#scroll-indicator', {
    opacity: 0,
    ease: 'none',
    scrollTrigger: {
      trigger: '#scene-1',
      start: 'top top',
      end: '+=100',
      scrub: true,
    },
  });

  // Shrink and move hero logo up and left
  gsap.to('#hero-logo', {
    scale: 0.2,
    x: -515,
    y: 0,
    ease: 'none',
    scrollTrigger: {
      trigger: '#scene-1',
      start: 'top top',
      end: '+=300',
      scrub: true,
    },
  });

  // Fade out hero logo at the end
  gsap.to('#hero-logo', {
    opacity: 0,
    ease: 'none',
    scrollTrigger: {
      trigger: '#scene-1',
      start: '+=300',
      end: '+=350',
      scrub: true,
    },
  });

  // Show header
  gsap.to('#header', {
    opacity: 1,
    y: 0,
    ease: 'none',
    scrollTrigger: {
      trigger: '#scene-1',
      start: '+=100',
      end: '+=150',
      scrub: true,
    },
  });

  // Show header logo
  gsap.to('#header-logo', {
    opacity: 1,
    ease: 'none',
    scrollTrigger: {
      trigger: '#scene-1',
      start: '+=400',
      end: '+=450',
      scrub: true,
    },
  });
</script>
